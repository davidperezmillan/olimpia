{% extends "base_generic.html" %} 

{% block content %}





<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/jq-3.2.1/dt-1.10.16/datatables.min.css"/>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs/jq-3.2.1/dt-1.10.16/datatables.min.js"></script>

<script type="text/javascript">

    $(document).ready(function() {
        $('#torrent_found').dataTable({
            "order": [
                [0, "desc"],
                [1, "desc"]

            ],
            "lengthMenu": [
                [10, 25, 50, -1],
                [10, 25, 50, "All"]
            ],
            "pageLength": 10,
            
            "language": {
                "url": "/static/merc/js/Spanish.json",
                // "search": "Busqueda: ",
                // "lengthMenu": "Mostrar _MENU_ registros por página",
                // "zeroRecords": "No se encontró nada, lo siento",
                // "info": "Mostrando pagina _PAGE_ de _PAGES_",
                // "infoEmpty": "No hay registros",
                // "infoFiltered": "(filtrado de _MAX_ registros totales)",
                // "paginate":{
                //     "first":"Primero",
                //     "previous": "Previo",
                //     "next": "Siguiente",
                //     "last":"Ultimo",
                // },
            },
            
            "columnDefs": [{
                "targets": 2,
                "orderable": false
            }]
            
            
        });
        
        $('#torrent_added').dataTable({
            "order": [
                [0, "desc"]

            ],
            "lengthMenu": [
                [10, 25, 50, -1],
                [10, 25, 50, "All"]
            ],
            "pageLength": 10,
            
            "language": {
                "url": "/static/merc/js/Spanish.json",
                // "search": "Busqueda: ",
                // "lengthMenu": "Mostrar _MENU_ registros por página",
                // "zeroRecords": "No se encontró nada, lo siento",
                // "info": "Mostrando pagina _PAGE_ de _PAGES_",
                // "infoEmpty": "No hay registros",
                // "infoFiltered": "(filtrado de _MAX_ registros totales)",
                // "paginate":{
                //     "first":"Primero",
                //     "previous": "Previo",
                //     "next": "Siguiente",
                //     "last":"Ultimo",
                // },
            },
            
            // "columnDefs": [{
            //     "targets": 4,
            //     "orderable": false
            // }]
            
            
        });
    });
</script>

<!-- <div class="container"> -->

{% if errors_messages %}
    {% for error_message in errors_messages %}
        <p><strong>{{ error_message }}</strong></p>
    {% endfor %}
{% endif %}


<table class="table table-striped table-bordered" width="100%" cellspacing="0">
    <tr>
        {% if serie %}
            {% if to_saved %}
             <td><strong>Hemos grabado la serie</strong></td>
            {% endif %}
            
            {% if perms.merc.change_series %}
                <td><a href="{% url 'control_edit' serie.id %}">{{ serie.nombre }}</a></td>
            {% endif %} 
            {% if perms.merc.delete_series %}
                <td>
                    <a href="{% url 'control_delete' serie.id %}"><i class="glyphicon glyphicon-remove"></i></a>
                     {% if perms.merc.change_series %}<a href="{% url 'control_edit' serie.id %}"><i class="glyphicon glyphicon-edit"></i></a> {% endif %} 
                </td>
            {% endif %} 
        {% endif %} 
    </tr>
</table>

{% if torrent_found %}
<table id="torrent_found" class="table table-striped table-bordered" width="100%" cellspacing="0">
    <thead>
        <tr>
            <td>Titulo</td>
            <td>Episodio</td>
	        <td>link</td>
        </tr>
    </thead>
    <tbody>
        {% for torrent in torrent_found %}
        <tr>
            <td>{{ torrent.title }}</td>
            <td>{{ torrent.episode }}</td>
            <td> 
                {{ torrent.link }}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No se han encontrado nuevos registros</p>
{% endif %} 


{% if torrent_added %}
<table id="torrent_added" class="table table-striped table-bordered" width="100%" cellspacing="0">
    <thead>
        <tr>
            <td>id</td>
            <td>Name</td>
            <td>Status</td>
	       
        </tr>
    </thead>
    <tbody>
        {% for t_added in torrent_added %}
        <tr>
            <td>{{ t_added.id }} </td>
            <td>{{ t_added.name }}</td>
            {% if t_added.error %}
                 <td>{{ t_added }} : {{t_added.error}} : {{ t_added.errorString}}</td>
            {% else %}
                <td>{{ t_added }} OK</td>
            {% endif %} 
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No se han añadido torrents</p>
{% endif %} 




<!-- </div> -->
{% endblock %}
